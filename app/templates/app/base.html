{% extends 'bootstrap5/bootstrap5.html' %}
{% load bootstrap5 %}

{% block bootstrap5_extra_head %}
<script>
    function like(recipe_id) {
        fetch(`/like/${recipe_id}`).then(response => {
            if (response.ok) {
                button = document.getElementById(`like${recipe_id}`);
                button.id = `unlike${recipe_id}`;
                button.name = `unlike${recipe_id}`;
                button.setAttribute('class', 'btn btn-secondary');
                button.setAttribute('onclick', `unlike(${recipe_id})`);
                button.innerHTML = 'Unlike';
            } else {
                // can maybe put an error message here but not very important
            }
        })
    }

    function unlike(recipe_id) {
        fetch(`/unlike/${recipe_id}`).then(response => {
            if (response.ok) {
                button = document.getElementById(`unlike${recipe_id}`);
                button.id = `like${recipe_id}`;
                button.name = `like${recipe_id}`;
                button.setAttribute('class', 'btn btn-success');
                button.setAttribute('onclick', `like(${recipe_id})`);
                button.innerHTML = 'Like';
            } else {
                // can maybe put an error message here but not very important
            }
        })
    }
</script>{% block scripts %}{% endblock scripts %}{% endblock bootstrap5_extra_head %}

{% block bootstrap5_content %}
<nav class='navbar navbar-expand sticky-top navbar-light' style="background-color: darkslateblue;"><div class="container">
    <a href="{% url 'app:index' %}" class='nav-link justify-content-start' style="color: white">Home</a>
    <div class='collapse navbar-collapse justify-content-end'>
        {% if user.is_authenticated %}
        <a href="/create" class='nav-link'style="color: white">Create</a>
        <a href="{% url 'app:profile' %}" class='nav-link'style="color: white">Profile</a>
        <a href="/accounts/logout" class='nav-link'style="color: white">Logout</a>
        {% else %}
        <a href="/accounts/google/login" class='nav-link'style="color: white">Login</a>
        {% endif %}
    </div>
    <form class="d-flex" method=POST action="{% url 'app:searchbar' %}">
        {% csrf_token %}
        <input class="form-control" type="search" placeholder="Search Recipe" aria-label="Search" name="searched">
        <button class='btn btn-outline-secondary' type="submit" style="color: white"> Search </button>
    </form>
</nav></div>
<div class='container mt-5 mb-5'>
    {% block content %}{% endblock content %}
    <footer class='text-center mt-3'>&copy A-05, MIT License</footer>
</div>
{% endblock bootstrap5_content %}